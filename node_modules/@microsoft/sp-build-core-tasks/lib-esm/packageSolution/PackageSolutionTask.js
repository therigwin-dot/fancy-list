import { Terminal } from '@rushstack/terminal';
import { _SolutionPackager as SolutionPackager } from '@microsoft/spfx-heft-plugins';
import { OdspGulpTask } from '../OdspGulpTask';
import { GulpTaskTerminalProvider } from '../utilities/GulpTaskTerminalProvider';
// This should be "OdspGulpTask<void>", but GulpTaskTerminalProvider doesn't like that
export class PackageSolutionTask extends OdspGulpTask {
    async executeTask() {
        const solutionPackager = new SolutionPackager({
            buildFolder: this.buildConfig.rootPath,
            terminal: new Terminal(new GulpTaskTerminalProvider(this)),
            emitWarning: (error)=>this.logWarning(error.message),
            emitError: (error)=>this.logError(error.message)
        });
        await solutionPackager.packageSolutionAsync(this.buildConfig.production);
    }
    constructor(){
        super('package-solution');
    }
}

//#sourceMappingUrl=./PackageSolutionTask.js.map