import { Terminal } from '@rushstack/terminal';
import { _DeployAzureStoragePlugin as DeployAzureStoragePlugin } from '@microsoft/spfx-heft-plugins';
import { GulpTask } from '@microsoft/gulp-core-build';
import { GulpTaskTerminalProvider } from '../utilities/GulpTaskTerminalProvider';
// This should be "OdspGulpTask<void>", but GulpTaskTerminalProvider doesn't like that
export class DeployAzureStorageTask extends GulpTask {
    async executeTask() {
        const terminal = new Terminal(new GulpTaskTerminalProvider(this));
        await DeployAzureStoragePlugin.deployToAzureAsync({
            terminal,
            buildFolder: this.buildConfig.rootPath,
            emitError: (error)=>this.logError(error.message),
            tryCreateContainer: true
        });
    }
    constructor(){
        super('deploy-azure-storage');
    }
}

//#sourceMappingUrl=./DeployAzureStorageTask.js.map