{"version":3,"file":"TagProjectSelectorParser.js","sourceRoot":"","sources":["../../../src/logic/selectors/TagProjectSelectorParser.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAE3D,oEAAoE;AAKpE,oDAAiD;AAEjD,MAAa,wBAAwB;IAGnC,YAAmB,iBAAoC;QACrD,IAAI,CAAC,kBAAkB,GAAG,iBAAiB,CAAC;IAC9C,CAAC;IAEM,KAAK,CAAC,qBAAqB,CAAC,EACjC,gBAAgB,EAChB,QAAQ,EACR,aAAa,EACY;QACzB,MAAM,SAAS,GACb,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC9D,IAAI,CAAC,SAAS,EAAE,CAAC;YACf,QAAQ,CAAC,cAAc,CACrB,YAAY,gBAAgB,gBAAgB,aAAa,yCAAyC;gBAChG,GAAG,6BAAa,CAAC,gBAAgB,GAAG,CACvC,CAAC;YACF,MAAM,IAAI,wCAAoB,EAAE,CAAC;QACnC,CAAC;QACD,OAAO,SAAS,CAAC;IACnB,CAAC;IAEM,cAAc;QACnB,OAAO,IAAI,CAAC,kBAAkB,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;IACtD,CAAC;CACF;AA3BD,4DA2BC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport { AlreadyReportedError } from '@rushstack/node-core-library';\n\nimport type { RushConfiguration } from '../../api/RushConfiguration';\nimport type { RushConfigurationProject } from '../../api/RushConfigurationProject';\nimport type { IEvaluateSelectorOptions, ISelectorParser } from './ISelectorParser';\nimport { RushConstants } from '../RushConstants';\n\nexport class TagProjectSelectorParser implements ISelectorParser<RushConfigurationProject> {\n  private readonly _rushConfiguration: RushConfiguration;\n\n  public constructor(rushConfiguration: RushConfiguration) {\n    this._rushConfiguration = rushConfiguration;\n  }\n\n  public async evaluateSelectorAsync({\n    unscopedSelector,\n    terminal,\n    parameterName\n  }: IEvaluateSelectorOptions): Promise<Iterable<RushConfigurationProject>> {\n    const selection: ReadonlySet<RushConfigurationProject> | undefined =\n      this._rushConfiguration.projectsByTag.get(unscopedSelector);\n    if (!selection) {\n      terminal.writeErrorLine(\n        `The tag \"${unscopedSelector}\" passed to \"${parameterName}\" is not specified for any projects in ` +\n          `${RushConstants.rushJsonFilename}.`\n      );\n      throw new AlreadyReportedError();\n    }\n    return selection;\n  }\n\n  public getCompletions(): Iterable<string> {\n    return this._rushConfiguration.projectsByTag.keys();\n  }\n}\n"]}