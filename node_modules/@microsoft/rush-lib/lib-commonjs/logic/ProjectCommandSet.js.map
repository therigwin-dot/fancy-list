{"version":3,"file":"ProjectCommandSet.js","sourceRoot":"","sources":["../../src/logic/ProjectCommandSet.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAI3D;;GAEG;AACH,MAAa,iBAAiB;IAK5B,YAAmB,WAAyB;QAJ5B,yBAAoB,GAAa,EAAE,CAAC;QACpC,iBAAY,GAAa,EAAE,CAAC;QAC3B,mBAAc,GAAwB,IAAI,GAAG,EAAkB,CAAC;QAG/E,MAAM,OAAO,GAA4B,WAAW,CAAC,OAAO,IAAI,EAAE,CAAC;QAEnE,KAAK,MAAM,UAAU,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;YAC9C,IAAI,UAAU,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,UAAU,CAAC,MAAM,KAAK,CAAC,EAAE,CAAC;gBACrD,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC7C,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACnC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC;YAC3D,CAAC;QACH,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;IAC3B,CAAC;IAEM,gBAAgB,CAAC,WAAmB;QACzC,OAAO,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC9C,CAAC;IAEM,aAAa,CAAC,WAAmB;QACtC,MAAM,MAAM,GAAuB,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;QACtE,IAAI,MAAM,KAAK,SAAS,EAAE,CAAC;YACzB,MAAM,IAAI,KAAK,CAAC,gBAAgB,WAAW,iBAAiB,CAAC,CAAC;QAChE,CAAC;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AA/BD,8CA+BC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport type { IPackageJson, IPackageJsonScriptTable } from '@rushstack/node-core-library';\n\n/**\n * Parses the \"scripts\" section from package.json and provides support for executing scripts.\n */\nexport class ProjectCommandSet {\n  public readonly malformedScriptNames: string[] = [];\n  public readonly commandNames: string[] = [];\n  private readonly _scriptsByName: Map<string, string> = new Map<string, string>();\n\n  public constructor(packageJson: IPackageJson) {\n    const scripts: IPackageJsonScriptTable = packageJson.scripts || {};\n\n    for (const scriptName of Object.keys(scripts)) {\n      if (scriptName[0] === '-' || scriptName.length === 0) {\n        this.malformedScriptNames.push(scriptName);\n      } else {\n        this.commandNames.push(scriptName);\n        this._scriptsByName.set(scriptName, scripts[scriptName]);\n      }\n    }\n\n    this.commandNames.sort();\n  }\n\n  public tryGetScriptBody(commandName: string): string | undefined {\n    return this._scriptsByName.get(commandName);\n  }\n\n  public getScriptBody(commandName: string): string {\n    const result: string | undefined = this.tryGetScriptBody(commandName);\n    if (result === undefined) {\n      throw new Error(`The command \"${commandName}\" was not found`);\n    }\n    return result;\n  }\n}\n"]}