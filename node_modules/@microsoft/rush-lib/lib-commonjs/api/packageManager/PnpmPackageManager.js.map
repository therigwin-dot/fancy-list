{"version":3,"file":"PnpmPackageManager.js","sourceRoot":"","sources":["../../../src/api/packageManager/PnpmPackageManager.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;;;;;;;;;;;;;;;;;;;;;;;;AAE3D,+CAAiC;AACjC,2CAA6B;AAE7B,6DAA0D;AAC1D,qDAAkD;AAElD;;GAEG;AACH,MAAa,kBAAmB,SAAQ,+BAAc;IAYpD,gBAAgB;IAChB,YAAmB,OAAe;QAChC,KAAK,CAAC,OAAO,EAAE,MAAM,EAAE,6BAAa,CAAC,wBAAwB,CAAC,CAAC;QAE/D,MAAM,aAAa,GAAkB,IAAI,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;QAEhE,IAAI,aAAa,CAAC,KAAK,IAAI,CAAC,EAAE,CAAC;YAC7B,8BAA8B;YAC9B,IAAI,CAAC,gBAAgB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;QAC3D,CAAC;aAAM,CAAC;YACN,IAAI,CAAC,gBAAgB,GAAG,6BAAa,CAAC,kBAAkB,CAAC;QAC3D,CAAC;QAED,+BAA+B;QAC/B,yEAAyE;QACzE,IAAI,CAAC,8BAA8B,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,WAAW,CAAC,CAAC;IACxF,CAAC;CACF;AA7BD,gDA6BC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport * as semver from 'semver';\nimport * as path from 'path';\n\nimport { RushConstants } from '../../logic/RushConstants';\nimport { PackageManager } from './PackageManager';\n\n/**\n * Support for interacting with the PNPM package manager.\n */\nexport class PnpmPackageManager extends PackageManager {\n  // example: node_modules/.pnpm/lock.yaml\n  public readonly internalShrinkwrapRelativePath: string;\n\n  /**\n   * The filename of the shrinkwrap file that is used by the package manager.\n   *\n   * @remarks\n   * Example: `pnpmfile.js` or `.pnpmfile.cjs`\n   */\n  public readonly pnpmfileFilename: string;\n\n  /** @internal */\n  public constructor(version: string) {\n    super(version, 'pnpm', RushConstants.pnpmV3ShrinkwrapFilename);\n\n    const parsedVersion: semver.SemVer = new semver.SemVer(version);\n\n    if (parsedVersion.major >= 6) {\n      // Introduced in version 6.0.0\n      this.pnpmfileFilename = RushConstants.pnpmfileV6Filename;\n    } else {\n      this.pnpmfileFilename = RushConstants.pnpmfileV1Filename;\n    }\n\n    // node_modules/.pnpm/lock.yaml\n    // See https://github.com/pnpm/pnpm/releases/tag/v4.0.0 for more details.\n    this.internalShrinkwrapRelativePath = path.join('node_modules', '.pnpm', 'lock.yaml');\n  }\n}\n"]}