{"version":3,"file":"SaveCallbackPackageJsonEditor.js","sourceRoot":"","sources":["../../src/api/SaveCallbackPackageJsonEditor.ts"],"names":[],"mappings":";AAAA,4FAA4F;AAC5F,2DAA2D;;;AAG3D,2DAAwD;AAQxD,MAAa,6BAA8B,SAAQ,qCAAiB;IAGlE,YAAoB,OAA2B;QAC7C,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;QAExC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC;IAClC,CAAC;IAEM,MAAM,CAAC,sBAAsB,CAAC,OAA2B;QAC9D,OAAO,IAAI,6BAA6B,CAAC,OAAO,CAAC,CAAC;IACpD,CAAC;IAEM,cAAc;QACnB,MAAM,QAAQ,GAAY,KAAK,CAAC,cAAc,EAAE,CAAC;QACjD,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;YAClB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;QACrC,CAAC;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;CACF;AArBD,sEAqBC","sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved. Licensed under the MIT license.\n// See LICENSE in the project root for license information.\n\nimport type { IPackageJson } from '@rushstack/node-core-library';\nimport { PackageJsonEditor } from './PackageJsonEditor';\n\nexport interface IFromObjectOptions {\n  object: IPackageJson;\n  filename: string;\n  onSaved?: (newObject: IPackageJson) => void;\n}\n\nexport class SaveCallbackPackageJsonEditor extends PackageJsonEditor {\n  private readonly _onSaved: ((newObject: IPackageJson) => void) | undefined;\n\n  private constructor(options: IFromObjectOptions) {\n    super(options.filename, options.object);\n\n    this._onSaved = options.onSaved;\n  }\n\n  public static fromObjectWithCallback(options: IFromObjectOptions): SaveCallbackPackageJsonEditor {\n    return new SaveCallbackPackageJsonEditor(options);\n  }\n\n  public saveIfModified(): boolean {\n    const modified: boolean = super.saveIfModified();\n    if (this._onSaved) {\n      this._onSaved(this.saveToObject());\n    }\n\n    return modified;\n  }\n}\n"]}