{"version":3,"sources":["../src/components/NavSubItem/useNavSubItem.ts"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, slot, useEventCallback, isHTMLElement } from '@fluentui/react-utilities';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\nimport { useNavContext_unstable } from '../NavContext';\nimport { useNavCategoryContext_unstable } from '../NavCategoryContext';\n\nimport type { ARIAButtonSlotProps } from '@fluentui/react-aria';\nimport type { NavSubItemProps, NavSubItemState } from './NavSubItem.types';\n\n/**\n * Create the state required to render NavSubItem.\n *\n * The returned state can be modified with hooks such as useNavSubItemStyles_unstable,\n * before being passed to renderNavSubItem_unstable.\n *\n * @param props - props from this instance of NavSubItem\n * @param ref - reference to root HTMLButtonElement of NavSubItem\n */\nexport const useNavSubItem_unstable = (\n  props: NavSubItemProps,\n  ref: React.Ref<HTMLButtonElement | HTMLAnchorElement>,\n): NavSubItemState => {\n  const { onClick, value: subItemValue, as, href } = props;\n\n  const { selectedValue, onRegister, onUnregister, onSelect, density = 'medium' } = useNavContext_unstable();\n\n  const { value: parentCategoryValue } = useNavCategoryContext_unstable();\n\n  const rootElementType = as || (href ? 'a' : 'button');\n\n  const selected = selectedValue === subItemValue;\n\n  const innerRef = React.useRef<HTMLElement>(null);\n\n  const onNavSubItemClick: ARIAButtonSlotProps<'a'>['onClick'] = useEventCallback(event => {\n    onClick?.(event);\n\n    if (!event.defaultPrevented && isHTMLElement(event.target)) {\n      onSelect(event, { type: 'click', event, value: subItemValue, categoryValue: parentCategoryValue });\n    }\n  });\n\n  const root = slot.always<ARIAButtonSlotProps<'a'>>(\n    getIntrinsicElementProps(\n      rootElementType,\n      useARIAButtonProps(rootElementType, {\n        'aria-current': selected ? 'page' : 'false',\n        ...props,\n      }),\n    ),\n    {\n      elementType: rootElementType,\n      defaultProps: {\n        ref: ref as React.Ref<HTMLButtonElement & HTMLAnchorElement>,\n        type: rootElementType,\n      },\n    },\n  );\n\n  root.onClick = onNavSubItemClick;\n\n  React.useEffect(() => {\n    onRegister({\n      value: subItemValue,\n      ref: innerRef,\n    });\n\n    return () => {\n      onUnregister({ value: subItemValue, ref: innerRef });\n    };\n  }, [onRegister, onUnregister, innerRef, subItemValue]);\n\n  return {\n    components: {\n      root: rootElementType,\n    },\n    root,\n    selected,\n    value: subItemValue,\n    density,\n  };\n};\n"],"names":["useNavSubItem_unstable","props","ref","onClick","value","subItemValue","as","href","selectedValue","onRegister","onUnregister","onSelect","density","useNavContext_unstable","parentCategoryValue","useNavCategoryContext_unstable","rootElementType","selected","innerRef","React","useRef","onNavSubItemClick","useEventCallback","event","defaultPrevented","isHTMLElement","target","type","categoryValue","root","slot","always","getIntrinsicElementProps","useARIAButtonProps","elementType","defaultProps","useEffect","components"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAkBaA;;;eAAAA;;;;iEAlBU;gCACyD;2BAC7C;4BACI;oCACQ;AAcxC,MAAMA,yBAAyB,CACpCC,OACAC;IAEA,MAAM,EAAEC,OAAO,EAAEC,OAAOC,YAAY,EAAEC,EAAE,EAAEC,IAAI,EAAE,GAAGN;IAEnD,MAAM,EAAEO,aAAa,EAAEC,UAAU,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,EAAE,GAAGC,IAAAA,kCAAAA;IAElF,MAAM,EAAET,OAAOU,mBAAmB,EAAE,GAAGC,IAAAA,kDAAAA;IAEvC,MAAMC,kBAAkBV,MAAOC,CAAAA,OAAO,MAAM,QAAA;IAE5C,MAAMU,WAAWT,kBAAkBH;IAEnC,MAAMa,WAAWC,OAAMC,MAAM,CAAc;IAE3C,MAAMC,oBAAyDC,IAAAA,gCAAAA,EAAiBC,CAAAA;QAC9EpB,YAAAA,QAAAA,YAAAA,KAAAA,IAAAA,KAAAA,IAAAA,QAAUoB;QAEV,IAAI,CAACA,MAAMC,gBAAgB,IAAIC,IAAAA,6BAAAA,EAAcF,MAAMG,MAAM,GAAG;YAC1Df,SAASY,OAAO;gBAAEI,MAAM;gBAASJ;gBAAOnB,OAAOC;gBAAcuB,eAAed;YAAoB;QAClG;IACF;IAEA,MAAMe,OAAOC,oBAAAA,CAAKC,MAAM,CACtBC,IAAAA,wCAAAA,EACEhB,iBACAiB,IAAAA,6BAAAA,EAAmBjB,iBAAiB;QAClC,gBAAgBC,WAAW,SAAS;QACpC,GAAGhB,KAAK;IACV,KAEF;QACEiC,aAAalB;QACbmB,cAAc;YACZjC,KAAKA;YACLyB,MAAMX;QACR;IACF;IAGFa,KAAK1B,OAAO,GAAGkB;IAEfF,OAAMiB,SAAS,CAAC;QACd3B,WAAW;YACTL,OAAOC;YACPH,KAAKgB;QACP;QAEA,OAAO;YACLR,aAAa;gBAAEN,OAAOC;gBAAcH,KAAKgB;YAAS;QACpD;IACF,GAAG;QAACT;QAAYC;QAAcQ;QAAUb;KAAa;IAErD,OAAO;QACLgC,YAAY;YACVR,MAAMb;QACR;QACAa;QACAZ;QACAb,OAAOC;QACPO;IACF;AACF"}