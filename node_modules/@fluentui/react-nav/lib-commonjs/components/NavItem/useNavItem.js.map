{"version":3,"sources":["../src/components/NavItem/useNavItem.ts"],"sourcesContent":["import * as React from 'react';\nimport { getIntrinsicElementProps, slot, useEventCallback, isHTMLElement } from '@fluentui/react-utilities';\nimport { useARIAButtonProps } from '@fluentui/react-aria';\nimport { useNavContext_unstable } from '../NavContext';\n\nimport type { ARIAButtonSlotProps } from '@fluentui/react-aria';\nimport type { NavItemProps, NavItemState } from './NavItem.types';\n\n/**\n * Create the state required to render NavItem.\n *\n * The returned state can be modified with hooks such as useNavItemStyles_unstable,\n * before being passed to renderNavItem_unstable.\n *\n * @param props - props from this instance of NavItem\n * @param ref - reference to root HTMLAnchorElement of NavItem\n */\nexport const useNavItem_unstable = (\n  props: NavItemProps,\n  ref: React.Ref<HTMLButtonElement | HTMLAnchorElement>,\n): NavItemState => {\n  const { onClick, value, icon, as, href } = props;\n\n  const { selectedValue, onRegister, onUnregister, onSelect, density = 'medium' } = useNavContext_unstable();\n\n  const rootElementType = as || (href ? 'a' : 'button');\n\n  const selected = selectedValue === value;\n\n  const innerRef = React.useRef<HTMLElement>(null);\n\n  const onNavItemClick: ARIAButtonSlotProps<'a'>['onClick'] = useEventCallback(event => {\n    onClick?.(event);\n\n    if (!event.defaultPrevented && isHTMLElement(event.target)) {\n      onSelect(event, { type: 'click', event, value });\n    }\n  });\n\n  const root = slot.always<ARIAButtonSlotProps<'a'>>(\n    getIntrinsicElementProps(\n      rootElementType,\n      useARIAButtonProps(rootElementType, {\n        'aria-current': selected ? 'page' : 'false',\n        ...props,\n      }),\n    ),\n    {\n      elementType: rootElementType,\n      defaultProps: {\n        ref: ref as React.Ref<HTMLButtonElement & HTMLAnchorElement>,\n        type: rootElementType,\n      },\n    },\n  );\n\n  root.onClick = onNavItemClick;\n\n  React.useEffect(() => {\n    onRegister({\n      value,\n      ref: innerRef,\n    });\n\n    return () => {\n      onUnregister({ value, ref: innerRef });\n    };\n  }, [onRegister, onUnregister, innerRef, value]);\n\n  return {\n    components: { root: rootElementType, icon: 'span' },\n    root,\n    icon: slot.optional(icon, {\n      elementType: 'span',\n    }),\n    selected,\n    value,\n    density,\n  };\n};\n"],"names":["useNavItem_unstable","props","ref","onClick","value","icon","as","href","selectedValue","onRegister","onUnregister","onSelect","density","useNavContext_unstable","rootElementType","selected","innerRef","React","useRef","onNavItemClick","useEventCallback","event","defaultPrevented","isHTMLElement","target","type","root","slot","always","getIntrinsicElementProps","useARIAButtonProps","elementType","defaultProps","useEffect","components","optional"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;+BAiBaA;;;eAAAA;;;;iEAjBU;gCACyD;2BAC7C;4BACI;AAchC,MAAMA,sBAAsB,CACjCC,OACAC;IAEA,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAEC,IAAI,EAAEC,EAAE,EAAEC,IAAI,EAAE,GAAGN;IAE3C,MAAM,EAAEO,aAAa,EAAEC,UAAU,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,EAAE,GAAGC,IAAAA,kCAAAA;IAElF,MAAMC,kBAAkBR,MAAOC,CAAAA,OAAO,MAAM,QAAA;IAE5C,MAAMQ,WAAWP,kBAAkBJ;IAEnC,MAAMY,WAAWC,OAAMC,MAAM,CAAc;IAE3C,MAAMC,iBAAsDC,IAAAA,gCAAAA,EAAiBC,CAAAA;QAC3ElB,YAAAA,QAAAA,YAAAA,KAAAA,IAAAA,KAAAA,IAAAA,QAAUkB;QAEV,IAAI,CAACA,MAAMC,gBAAgB,IAAIC,IAAAA,6BAAAA,EAAcF,MAAMG,MAAM,GAAG;YAC1Db,SAASU,OAAO;gBAAEI,MAAM;gBAASJ;gBAAOjB;YAAM;QAChD;IACF;IAEA,MAAMsB,OAAOC,oBAAAA,CAAKC,MAAM,CACtBC,IAAAA,wCAAAA,EACEf,iBACAgB,IAAAA,6BAAAA,EAAmBhB,iBAAiB;QAClC,gBAAgBC,WAAW,SAAS;QACpC,GAAGd,KAAK;IACV,KAEF;QACE8B,aAAajB;QACbkB,cAAc;YACZ9B,KAAKA;YACLuB,MAAMX;QACR;IACF;IAGFY,KAAKvB,OAAO,GAAGgB;IAEfF,OAAMgB,SAAS,CAAC;QACdxB,WAAW;YACTL;YACAF,KAAKc;QACP;QAEA,OAAO;YACLN,aAAa;gBAAEN;gBAAOF,KAAKc;YAAS;QACtC;IACF,GAAG;QAACP;QAAYC;QAAcM;QAAUZ;KAAM;IAE9C,OAAO;QACL8B,YAAY;YAAER,MAAMZ;YAAiBT,MAAM;QAAO;QAClDqB;QACArB,MAAMsB,oBAAAA,CAAKQ,QAAQ,CAAC9B,MAAM;YACxB0B,aAAa;QACf;QACAhB;QACAX;QACAQ;IACF;AACF"}